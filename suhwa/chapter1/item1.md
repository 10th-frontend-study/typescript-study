### 이번 item에서 알아볼 것

- “타입스크립트는 자바스크립트의 상위 집합이다.” 라는 말의 의미를 알아본다.
- 타입스크립트와 자바스크립트의 관계를 알아본다.

> 서로 밀접한 관계에 있기 때문에 어떻게 연관되어있는지 이해하는 것이 중요하다.

---

### 자바스크립트와 타입스크립트의 관계

- 자바스크립트에 문법 오류가 없다면 타입스크립트 프로그램이라고 할 수 있다.
- 자바스크립트는 `.js` / 타입스크립트는 `.ts` 나 `.tsx`를 사용한다.
- .js 파일을 .ts로 바꾼다 해도 달라지는 것은 없다. (기존 코드를 유지하면서 일부에만 타입스크립트 적용이 가능하다.)

  - 이러한 특성은 기존 js를 ts로 마이그레이션하는데 이점이 된다.

- 하지만, 모든 타입스크립트가 자바스크립트라는 말은 성립하지 않는다.
  ex) 여기서 자바스크립트를 구동하는 node 프로그램으로 실행 시 오류가 발생한다. ( ⇒ typescript 코드는 node로 실행시킬 수 없기 때문 )
  - `:string` 은 타입스크립트에서 쓰이는 타입 구문으로, 타입 구문을 쓰기 시작하는 순간 자바스크립트는 타입스크립트의 영역으로 들어가게 된다.
    ```jsx
    function greet(who: string) {
      console.log("hello", who);
    }
    ```

### 타입스크립트 컴파일러는 자바스크립트 코드에도 유용하다.

- 타입을 미리 추론함으로서 발생할 수 있는 오류를 미리 알려준다.
  - 다음 코드에서는 `TypeError` 에러가 발생한다.
    - city 변수가 문자열이라는 것을 알려주지 않아도 타입스크립트는 초깃값으로 부터 `타입을 추론`한다.
      ```jsx
      let city = "new york city";
      console.log(city.toUppercase()); // toUppercase 속성이 string 형식에 없습니다. toUpperCase를 사용하시겠습니까?
      ```
- 타입 구문을 추가함으로써 코드의 의도가 무엇인지 알려줄 수 있다.
  - State라는 타입 구문을 통해 의도를 명확히 했고, 제시된 해결책 또한 올바른 것을 볼 수 있다.
  ```jsx
  interface State {
    name: string;
    capital: string;
  }

  const states: State[] = [
    {
      name: "a",
      capitol: "b",
    },
    {
      name: "c",
      capitol: "d",
    },
    {
      name: "e",
      capitol: "f", // 'State'형식에 'capitol'이 없습니다. 'capital'을 쓰려고 했습니까?
    },
  ];

  for (const state of states) {
    console.log(state.capital);
  }
  ```

### 타입스크립트 타입 시스템은 자바스크립트의 런타임 동작을 모델링한다.

- 다른 언어였다면 런타임 오류가 될 만한 코드도 오류를 발생시키지 않는다.

  ```jsx
  const x = 2 + "3"; // 정상
  const y = "2" + 3; // 정상
  ```

- 또한 정상적으로 동작하는 코드에 오류를 표시하기도 한다.
  ```jsx
  const a = null + 7; // + 연산자를 ... 형식에 적용할 수 없습니다.
  const b = [] + 12; // + 연산자를 ... 형식에 적용할 수 없습니다.
  alert("Hello", "Typescript"); // 0-1개의 인수가 필요한데, 2개를 가져왔습니다.
  ```

### 타입스크립트의 채택 여부는 온전히 우리의 선택이다.

- 타입스크립트의 도움을 받으면 오류가 적은 코드를 작성할 수 있다.
- 그러나, 앞선 예시에서 쓰인 null+7이나, 불필요한 매개변수를 추가해 오류를 발생시키는 코드를 당연하게 여긴다면 차라리 타입스크립트를 쓰지 않는 것이 낫다.
- 또한, 타입 체커를 통해 타입 체크가 통과하더라도 런타임에서 에러가 발생할 가능성이 있다.

→ 장단점을 잘 파악하고 쓰는 것을 권장

---

### 요약

1. 타입스크립트는 자바스크립트의 상위 집합이다. 다시 말해서 모든 자바스크립트 프로그램은 이미 타입스크립트 프로그램이다. 반대로 타입스크립트는 별도의 문법을 가지고 있기 때문에 일반적으로는 유효한 자바스크립트 프로그램이 아니다.
2. 타입스크립트는 자바스크립트 런타임 동작을 모델링하는 타입 시스템을 가지고 있기 때문에 런타임 오류를 발생시키는 코드를 찾아내려고 한다. 그러나 모든 오류를 찾아낼 것이라고 기대하면 안된다. 타입 체커를 통과해도 런타임오류를 발생시키는 코드는 분명 존재한다.
3. 타입스크립트 타입 시스템은 전반적으로 자바스크립트 동작을 모델링한다. 그러나 잘못된 매개변수 개수로 함수를 호출하는 경우처럼, 자바스크립트에서는 허용되지만 타입스크립트에서는 문제가되는 경우도 있다. 이러한 문법의 엄격함은 온전히 취향의 차이이며 우열을 가릴 수 없는 문제이다.

---

### 추가 정리

**용어 정리**

- 타입스크립트 컴파일러 : ts → js로 바꾸는 작업을 수행.
- 타입 체커 : ts의 일부분으로 타입 안정성을 검사. 변수, 함수가 선언된 타입에 따라 올바르게 쓰였는지 확인

동적 타입 vs 정적 타입

- 자바스크립트 : `동적 타입 시스템` ( 변수의 타입이 실행 시점에 결정된다. )
- 타입스크립트 : `정적 타입 시스템` ( 변수의 타입이 실행 이전에 결정된다. )

타입스크립트가 자바스크립트가 되기까지의 과정

1. ts 코드 작성
   1. 개발자는 타입스크립트 문법, 타입 시스템을 사용하여 코드를 작성
   2. ide를 통해 실시간으로 타입 체크를 수행 (`타입 체커`)하여 잠재적인 오류를 미리 알 수 있음
2. 타입 체크 (`타입 체커`) → 전체 모듈 간의 오류 발생 케이스나, 실시간 타입 체크를 껐을 경우도 고려하기 위해 진행
   1. 타입스크립트 컴파일러는 타입스크립트 파일을 읽어들여, 정적 타입 검사를 수행
   2. 변수, 함수가 선언된 타입에 맞게 사용됐는지 확인
3. 컴파일 (`컴파일러`)
   1. 타입 체크 완료 시 ts → js 변환
   2. 타입스크립트의 타입 정보는 제거되고 js 코드만 남음
4. 실행

   브라우저 or node와 같은 javascript 환경에서 동작
